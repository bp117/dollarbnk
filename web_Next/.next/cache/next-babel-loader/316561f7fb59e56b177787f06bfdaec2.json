{"ast":null,"code":"import _ from 'lodash';\nimport { getMyself, updateMyself } from 'api/users';\nimport * as actionTypes from './actionTypes'; // Get myself\n\nexport const getProfile = () => async dispatch => {\n  try {\n    const data = await getMyself();\n\n    if (!data) {\n      dispatch(fetchProfileStatus(false));\n      return;\n    }\n\n    dispatch({\n      type: actionTypes.FETCH_PROFILE,\n      data\n    });\n  } catch (err) {\n    throw new Error('Accounts fetch failed');\n  }\n}; // Status\n\nexport const fetchProfileStatus = status => ({\n  type: actionTypes.FETCH_PROFILE_STATUS,\n  status\n}); // Change user's details\n\nexport const changeUserDetails = (email = null, password = null, phone = null) => async dispatch => {\n  try {\n    const data = {};\n\n    if (email) {\n      data.email = email;\n    }\n\n    if (password) {\n      data.password = password;\n    }\n\n    if (phone) {\n      data.phone = phone;\n    }\n\n    if (!_.isEmpty(data)) {\n      const user = await updateMyself(data);\n\n      if (!user) {\n        dispatch(fetchProfileStatus(false));\n        return;\n      }\n\n      dispatch({\n        type: actionTypes.USER_CHANGE_DETAILS\n      });\n    }\n  } catch (err) {\n    dispatch(fetchProfileStatus(false));\n  }\n};","map":{"version":3,"sources":["/Users/binduraj/Documents/GitHub/dollarbank/web_Next/helper/actions/profile.js"],"names":["_","getMyself","updateMyself","actionTypes","getProfile","dispatch","data","fetchProfileStatus","type","FETCH_PROFILE","err","Error","status","FETCH_PROFILE_STATUS","changeUserDetails","email","password","phone","isEmpty","user","USER_CHANGE_DETAILS"],"mappings":"AAAA,OAAOA,CAAP,MAAc,QAAd;AACA,SAASC,SAAT,EAAoBC,YAApB,QAAwC,WAAxC;AACA,OAAO,KAAKC,WAAZ,MAA6B,eAA7B,C,CAEA;;AACA,OAAO,MAAMC,UAAU,GAAG,MAAM,MAAMC,QAAN,IAAkB;AAC/C,MAAI;AACD,UAAMC,IAAI,GAAG,MAAML,SAAS,EAA5B;;AAEA,QAAI,CAACK,IAAL,EAAW;AACRD,MAAAA,QAAQ,CAACE,kBAAkB,CAAC,KAAD,CAAnB,CAAR;AACA;AACF;;AAEDF,IAAAA,QAAQ,CAAC;AAAEG,MAAAA,IAAI,EAAEL,WAAW,CAACM,aAApB;AAAmCH,MAAAA;AAAnC,KAAD,CAAR;AACF,GATD,CASE,OAAOI,GAAP,EAAY;AACX,UAAM,IAAIC,KAAJ,CAAU,uBAAV,CAAN;AACF;AACH,CAbM,C,CAeP;;AACA,OAAO,MAAMJ,kBAAkB,GAAGK,MAAM,KAAK;AAC1CJ,EAAAA,IAAI,EAAEL,WAAW,CAACU,oBADwB;AAE1CD,EAAAA;AAF0C,CAAL,CAAjC,C,CAKP;;AACA,OAAO,MAAME,iBAAiB,GAAG,CAC9BC,KAAK,GAAG,IADsB,EAE9BC,QAAQ,GAAG,IAFmB,EAG9BC,KAAK,GAAG,IAHsB,KAI5B,MAAMZ,QAAN,IAAkB;AACpB,MAAI;AACD,UAAMC,IAAI,GAAG,EAAb;;AAEA,QAAIS,KAAJ,EAAW;AACRT,MAAAA,IAAI,CAACS,KAAL,GAAaA,KAAb;AACF;;AAED,QAAIC,QAAJ,EAAc;AACXV,MAAAA,IAAI,CAACU,QAAL,GAAgBA,QAAhB;AACF;;AAED,QAAIC,KAAJ,EAAW;AACRX,MAAAA,IAAI,CAACW,KAAL,GAAaA,KAAb;AACF;;AAED,QAAI,CAACjB,CAAC,CAACkB,OAAF,CAAUZ,IAAV,CAAL,EAAsB;AACnB,YAAMa,IAAI,GAAG,MAAMjB,YAAY,CAACI,IAAD,CAA/B;;AAEA,UAAI,CAACa,IAAL,EAAW;AACRd,QAAAA,QAAQ,CAACE,kBAAkB,CAAC,KAAD,CAAnB,CAAR;AACA;AACF;;AAEDF,MAAAA,QAAQ,CAAC;AACNG,QAAAA,IAAI,EAAEL,WAAW,CAACiB;AADZ,OAAD,CAAR;AAGF;AACH,GA3BD,CA2BE,OAAOV,GAAP,EAAY;AACXL,IAAAA,QAAQ,CAACE,kBAAkB,CAAC,KAAD,CAAnB,CAAR;AACF;AACH,CAnCM","sourcesContent":["import _ from 'lodash';\nimport { getMyself, updateMyself } from 'api/users';\nimport * as actionTypes from './actionTypes';\n\n// Get myself\nexport const getProfile = () => async dispatch => {\n   try {\n      const data = await getMyself();\n\n      if (!data) {\n         dispatch(fetchProfileStatus(false));\n         return;\n      }\n\n      dispatch({ type: actionTypes.FETCH_PROFILE, data });\n   } catch (err) {\n      throw new Error('Accounts fetch failed');\n   }\n};\n\n// Status\nexport const fetchProfileStatus = status => ({\n   type: actionTypes.FETCH_PROFILE_STATUS,\n   status\n});\n\n// Change user's details\nexport const changeUserDetails = (\n   email = null,\n   password = null,\n   phone = null\n) => async dispatch => {\n   try {\n      const data = {};\n\n      if (email) {\n         data.email = email;\n      }\n\n      if (password) {\n         data.password = password;\n      }\n\n      if (phone) {\n         data.phone = phone;\n      }\n\n      if (!_.isEmpty(data)) {\n         const user = await updateMyself(data);\n\n         if (!user) {\n            dispatch(fetchProfileStatus(false));\n            return;\n         }\n\n         dispatch({\n            type: actionTypes.USER_CHANGE_DETAILS\n         });\n      }\n   } catch (err) {\n      dispatch(fetchProfileStatus(false));\n   }\n};\n"]},"metadata":{},"sourceType":"module"}